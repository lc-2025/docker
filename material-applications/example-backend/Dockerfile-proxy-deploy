FROM golang:latest
WORKDIR /usr/src/app
COPY . .
ARG REQUEST_ORIGIN
ARG REDIS_HOST
ARG POSTGRES_HOST
ARG POSTGRES_PASSWORD
ENV REQUEST_ORIGIN=${REQUEST_ORIGIN}
ENV REDIS_HOST=${REDIS_HOST}
ENV POSTGRES_HOST=${POSTGRES_HOST}
ENV POSTGRES_PASSWORD=${POSTGRES_PASSWORD}
RUN go build
EXPOSE 8080
CMD ["./server"]
